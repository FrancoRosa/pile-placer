(this["webpackJsonppile-placer"]=this["webpackJsonppile-placer"]||[]).push([[0],{143:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(29),r=n.n(s),l=n(25),i=(n(72),n(73),n(3)),o=n(4),j=Object(c.createContext)(null),u=n(20),d=n(26),b=n(6),p=n.n(b),O=n(17),h=n(18),m=n.n(h),x=n(66),f="localhost:9999",g=n.n(x).a.connect("http://".concat(f)),v=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting lat lng"),n="http://".concat(f,"/api/location"),e.next=4,m.a.post(n,t);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting heading"),n="http://".concat(f,"/api/heading"),e.next=4,m.a.post(n,t);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting config"),n="http://".concat(f,"/api/config"),e.next=4,m.a.post(n,t);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting reference bay"),n="http://".concat(f,"/api/bay"),e.next=4,m.a.post(n,t);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... setting waypoint"),n="http://".concat(f,"/api/waypoint"),e.next=4,m.a.post(n,t);case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... getting waypoints"),t="http://".concat(f,"/api/waypoints"),e.next=4,m.a.get(t);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("... uploading file"),c="http://".concat(f,"/api/file"),(a=new FormData).append("file",t),a.append("code",n),e.next=7,m.a.post(c,a,{headers:{"Content-Type":"multipart/form-data"}});case 7:return s=e.sent,e.abrupt("return",s.data);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=n(0),L=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)("Nothing selected yet"),r=Object(i.a)(s,2),l=r[0],o=r[1],j=Object(c.useState)({}),b=Object(i.a)(j,2),p=b[0],O=b[1];Object(c.useEffect)((function(){document.querySelector(".file-input").addEventListener("change",(function(e){var t=e.target.files[0],n=e.target.files[0].name;a(t),o(n)}),!1)}),[]);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{className:"file has-name is-medium",children:Object(F.jsxs)("label",{className:"file-label",children:[Object(F.jsx)("input",{className:"file-input",type:"file",accept:".csv"}),Object(F.jsxs)("span",{className:"file-cta",children:[Object(F.jsx)("span",{className:"file-icon",children:Object(F.jsx)(d.a,{icon:u.d})}),Object(F.jsx)("span",{className:"file-label",children:"Choose a file ..."})]}),Object(F.jsx)("span",{className:"file-name",children:l})]})}),Object(F.jsx)("div",{className:"columns",children:Object(F.jsxs)("div",{className:"column mt-4",children:[n?Object(F.jsx)("div",{className:"is-flex is-justify-content-center m-4",children:Object(F.jsx)("button",{className:"button is-outlined is-success",onClick:function(){C(n).then((function(e){O(e)}))},children:"Upload"})}):"",p.message?Object(F.jsxs)("div",{className:"is-flex is-align-content-center m-1 is-flex-direction-column",children:[Object(F.jsx)("p",{className:p.message?"has-text-success":"has-text-fail",children:p.message?"Success":"Fail"}),Object(F.jsxs)("p",{children:["Waypoints found: ",p.rows]})]}):""]})})]})},H=function(e){var t=e.label,n=e.value,c=e.placeholder,a=e.changeHandler;return Object(F.jsxs)("div",{className:"field column",children:[Object(F.jsx)("label",{className:"label",children:t}),Object(F.jsx)("p",{className:"control",children:Object(F.jsx)("input",{className:"input is-medium",type:"number",step:.1,placeholder:c,onChange:function(e){return a(e.target.value)},value:n})})]})},W=function(){var e=function(e,t){var n=Object(c.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return console.log(c),t}})),a=Object(i.a)(n,2),s=a[0],r=a[1];return[s,function(t){try{var n=t instanceof Function?t(s):t;r(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(c){console.log(c)}}]}("config",{}),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(n.truckLen),r=Object(i.a)(s,2),l=r[0],o=r[1],j=Object(c.useState)(n.truckWid),u=Object(i.a)(j,2),d=u[0],b=u[1],p=Object(c.useState)(n.antennaX),O=Object(i.a)(p,2),h=O[0],m=O[1],x=Object(c.useState)(n.antennaY),f=Object(i.a)(x,2),g=f[0],v=f[1],y=Object(c.useState)(n.bay1),k=Object(i.a)(y,2),w=k[0],S=k[1],C=Object(c.useState)(n.bay2),W=Object(i.a)(C,2),A=W[0],I=W[1],B=Object(c.useState)(n.epsg),J=Object(i.a)(B,2),D=J[0],E=J[1],T=Object(c.useState)(""),M=Object(i.a)(T,2),z=M[0],P=M[1];return Object(F.jsx)("div",{className:"container",children:Object(F.jsxs)("div",{className:"columns",children:[Object(F.jsxs)("div",{className:"column",children:[Object(F.jsxs)("div",{className:"columns",children:[Object(F.jsx)(H,{label:"Truck length",value:l,placeholder:"Truck with trailer in ft",changeHandler:o}),Object(F.jsx)(H,{label:"Truck width",value:d,placeholder:"Trailer width in ft",changeHandler:b})]}),Object(F.jsxs)("div",{className:"columns",children:[Object(F.jsx)(H,{label:"Antenna from left",value:h,placeholder:"Antenna location in ft",changeHandler:m}),Object(F.jsx)(H,{label:"Antenna from truck head",value:g,placeholder:"Antenna location in ft",changeHandler:v})]}),Object(F.jsxs)("div",{className:"columns",children:[Object(F.jsx)(H,{label:"Bay 1 from truck head",value:w,placeholder:"Bay 1 location in ft",changeHandler:S}),Object(F.jsx)(H,{label:"Bay 2 from truck head",value:A,placeholder:"Bay 2 location in ft",changeHandler:I})]}),Object(F.jsx)("div",{className:"columns",children:Object(F.jsx)(H,{label:"EPSG code",value:D,placeholder:"Projected coordinate reference",changeHandler:E})}),Object(F.jsxs)("div",{className:"is-flex is-justify-content-center is-align-content-center",children:[Object(F.jsx)("button",{className:"button ml-2",onClick:function(){a({truckLen:l,truckWid:d,antennaX:h,antennaY:g,bay1:w,bay2:A,epsg:D}),N({truckLen:l,truckWid:d,antennaX:h,antennaY:g,bay1:w,bay2:A,epsg:D}).then((function(){return P("Success")})).catch((function(){return P("Fail")}))},children:"Save parameters"}),Object(F.jsx)("p",{className:"success ml-2 ".concat("Success"==z?"has-text-success":"has-text-danger"),children:z})]}),Object(F.jsx)("hr",{}),Object(F.jsx)(L,{})]}),Object(F.jsx)("div",{className:"column",children:Object(F.jsx)("h1",{className:"title is-4 has-text-centered",children:"Layout"})})]})})},A=n(22),I=n(16),B=Object(I.GoogleApiWrapper)({apiKey:"AIzaSyBsgd5A9q-23gHy8tL6e5O0lct6JoD97xo",version:"beta"})((function(e){var t=e.google,n=Object(c.useState)({heading:0,lat:0,lng:0}),a=Object(i.a)(n,2),s=a[0],r=a[1],l=Object(c.useState)([]),o=Object(i.a)(l,2),u=o[0],d=o[1],b=Object(c.useState)([]),p=Object(i.a)(b,2),O=p[0],h=p[1],m=Object(c.useState)([]),x=Object(i.a)(m,2),f=x[0],v=x[1],y=Object(c.useContext)(j),N=y.waypoint,C=y.setWaypoint;return Object(c.useEffect)((function(){return S().then((function(e){d(e.waypoints),e.waypoints.length>0&&r(Object(A.a)(Object(A.a)({},s),e.waypoints[0]))})),g.on("message",(function(e){console.log(e),e=JSON.parse(e),r(e),h([{lat:e.truck[0][0],lng:e.truck[0][1]},{lat:e.truck[1][0],lng:e.truck[1][1]},{lat:e.truck[2][0],lng:e.truck[2][1]},{lat:e.truck[3][0],lng:e.truck[3][1]},{lat:e.truck[0][0],lng:e.truck[0][1]}]),v([{lat:e.bays[0][0],lng:e.bays[0][1]},{lat:e.bays[1][0],lng:e.bays[1][1]}])})),function(){g.off("message")}}),[]),Object(c.useEffect)((function(){C(Object(A.a)(Object(A.a)({},N),{},{distance:s.distance}))}),[s]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{className:"container map",children:Object(F.jsxs)(I.Map,{google:t,zoom:22,initialCenter:s,center:s,mapId:"2f571dc2d7296a3a",onCenterChanged:function(e,t){t.setHeading(parseInt(s.heading))},onClick:function(e,t,n){r(Object(A.a)(Object(A.a)({},s),{},{lat:n.latLng.lat().toFixed(5),lng:n.latLng.lng().toFixed(5)}))},onDblclick:function(){return console.log("doubleClick")},disableDoubleClickZoom:!0,children:[u.map((function(e){return Object(F.jsx)(I.Circle,{center:e,radius:.5,strokeColor:e.color,strokeOpacity:.8,strokeWeight:2,fillColor:e.color,onClick:function(){C(e),w(e)},onDblclick:function(){return console.log("Toogle status")}})})),f.map((function(e,t){return Object(F.jsx)(I.Circle,{center:e,radius:.5,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,onClick:function(){return k({bay:t})}})})),Object(F.jsx)(I.Polygon,{paths:O,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35})]})}),Object(F.jsxs)("div",{className:"columns mt-3",children:[Object(F.jsx)("div",{className:"column",children:Object(F.jsxs)("p",{className:"heading",children:["Lat: ",s.lat]})}),Object(F.jsx)("div",{className:"column",children:Object(F.jsxs)("p",{className:"heading",children:["Lng: ",s.lng]})}),Object(F.jsx)("div",{className:"column",children:Object(F.jsxs)("p",{className:"heading",children:["Heading: ",s.heading]})})]})]})})),J=function(){var e,t=Object(c.useContext)(j);return Object(F.jsx)("div",{className:"container",children:Object(F.jsxs)("div",{className:"columns",children:[Object(F.jsx)("div",{className:"column",children:Object(F.jsx)(B,{})}),Object(F.jsxs)("div",{className:"column is-one-fifth",children:[Object(F.jsx)("p",{className:"title is-5 has-text-centered mt-4",children:" Next pile: "}),Object(F.jsxs)("div",{className:"is-flex is-flex-direction-column is-align-content-center mb-4",children:[Object(F.jsxs)("p",{children:["Lat: ",t.waypoint.lat]}),Object(F.jsxs)("p",{children:["Lng: ",t.waypoint.lng]}),Object(F.jsxs)("p",{children:["x: ",t.waypoint.x]}),Object(F.jsxs)("p",{children:["y: ",t.waypoint.y]}),Object(F.jsxs)("p",{children:["Color: ",t.waypoint.color]})]}),Object(F.jsx)("div",{className:"flag-icon color_red",children:Object(F.jsx)(d.a,{icon:u.a,color:t.waypoint.color})}),Object(F.jsxs)("p",{className:"title is-3 has-text-centered mt-3 mb-4",children:[" ",null===(e=t.waypoint.distance)||void 0===e?void 0:e.toFixed(1)," ft "]}),Object(F.jsx)("hr",{}),Object(F.jsx)("p",{className:"title is-5 has-text-centered",children:" Landed "}),Object(F.jsx)("p",{className:"title is-3 has-text-centered",children:" 50 "})]})]})})},D=function(e){var t=e.name,n=e.icon,c=Object(o.g)().pathname.includes(t.toLowerCase());return Object(F.jsx)("li",{className:c?"is-active":"",children:Object(F.jsxs)(l.b,{to:"/".concat(t.toLowerCase()),className:"mr-4 ml-4 mt-2",children:[Object(F.jsx)("span",{className:"icon is-small",children:Object(F.jsx)(d.a,{icon:n})}),Object(F.jsx)("span",{children:t})]})})},E=function(){return Object(F.jsx)("div",{className:"tabs is-centered is-large",children:Object(F.jsxs)("ul",{children:[Object(F.jsx)(D,{name:"Map",icon:u.b}),Object(F.jsx)(D,{name:"Config",icon:u.c})]})})},T=Object(I.GoogleApiWrapper)({apiKey:"AIzaSyBsgd5A9q-23gHy8tL6e5O0lct6JoD97xo"})((function(e){var t=e.google,n=Object(c.useState)(0),a=Object(i.a)(n,2),s=a[0],r=a[1],l=Object(c.useState)({lat:0,lng:0}),o=Object(i.a)(l,2),j=o[0],u=o[1];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)("div",{className:"container map",children:Object(F.jsx)(I.Map,{google:t,zoom:14,onClick:function(e,t,n){var c={lat:n.latLng.lat().toFixed(5),lng:n.latLng.lng().toFixed(5)};u(c),v(c),console.log(c)},initialCenter:{lat:35.0263495,lng:-118.13624929},children:Object(F.jsx)(I.Marker,{name:"target",position:j})})}),Object(F.jsx)("div",{className:"container mt-4 pt-4",children:Object(F.jsxs)("div",{className:"columns",children:[Object(F.jsxs)("div",{className:"column",children:[Object(F.jsxs)("p",{className:"ml-4",children:["Coordinates: ",j.lat,", ",j.lng]}),Object(F.jsxs)("p",{className:"ml-4",children:["Heading: ",s,"\xb0 "]})]}),Object(F.jsxs)("div",{className:"column",children:[Object(F.jsx)("p",{className:"ml-4",children:"Set heading:"}),Object(F.jsx)("input",{class:"slider m-4",step:1,min:0,max:360,value:s,type:"range",onInput:function(e){var t=parseFloat(e.target.value).toFixed(1);y({heading:t}),r(t)}})]})]})})]})})),M=function(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(F.jsxs)("div",{className:"container",children:[Object(F.jsx)(E,{}),Object(F.jsx)(j.Provider,{value:{waypoint:n,setWaypoint:a},children:Object(F.jsxs)(o.d,{children:[Object(F.jsx)(o.a,{exact:!0,from:"/",to:"/map"}),Object(F.jsx)(o.b,{path:"/config",component:W}),Object(F.jsx)(o.b,{path:"/map",component:J}),Object(F.jsx)(o.b,{path:"/debug",component:T})]})})]})};r.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(l.a,{children:Object(F.jsx)(M,{})})}),document.getElementById("root"))},72:function(e,t,n){},73:function(e,t,n){}},[[143,1,2]]]);
//# sourceMappingURL=main.ebdf8b25.chunk.js.map